<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>e_combat</name>
    <events>
        <include>e_item</include>
        <include>e_bubbleImformation</include>
        <include>e_fadeInOut</include>
        <event-group description="" sid="225877727883310" title="combat">
            <sub-events>
                <event-block sid="920896263571652">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="299253568336710" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="375765749602065" type="Function">
                            <param id="0" name="Name">&quot;fadeInLayout&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="-10" name="Set value" sid="185574674956843" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Value">Dictionary.Get(&quot;playerHp&quot;)</param>
                        </action>
                        <action behavior="Pin" id="0" name="Pin to object" sid="127483956600997" type="player_skin">
                            <param id="0" name="Pin to">player_poxy</param>
                            <param id="1" name="Mode">1</param>
                        </action>
                        <action id="0" name="Call function" sid="872958305029347" type="Function">
                            <param id="0" name="Name">&quot;randomEnemy&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="651959886446255">
                    <conditions>
                        <condition id="0" name="On function" sid="517446411771204" type="Function">
                            <param id="0" name="Name">&quot;randomEnemy&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="771845479473401" type="System">
                            <param id="0" name="Object to create">enemy</param>
                            <param id="1" name="Layer">&quot;game&quot;</param>
                            <param id="2" name="X">-160</param>
                            <param id="3" name="Y">120</param>
                        </action>
                        <action id="4" name="Set animation" sid="564451236572148" type="enemy">
                            <param id="0" name="Animation">&quot;enemy_1&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="836361273156690">
                    <conditions>
                        <condition behavior="MoveTo" id="0" name="On hit target position" sid="601256027040214" type="enemy" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="249160307667767" type="System">
                            <param id="0" name="Object to create">txt_right</param>
                            <param id="1" name="Layer">&quot;ui2&quot;</param>
                            <param id="2" name="X">enemy.X-enemy.Width/2-40</param>
                            <param id="3" name="Y">enemy.Y-enemy.Height/3</param>
                        </action>
                        <action id="-7" name="Set size" sid="796547950603420" type="txt_right">
                            <param id="0" name="Width">100</param>
                            <param id="1" name="Height">32</param>
                        </action>
                        <action id="-10" name="Set value" sid="292837328919326" type="txt_right">
                            <param id="0" name="Instance variable">groupID</param>
                            <param id="1" name="Value">&quot;enemy&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="637042410032914" type="txt_right">
                            <param id="0" name="Instance variable">actionID</param>
                            <param id="1" name="Value">&quot;hp&quot;</param>
                        </action>
                        <action id="0" name="Set text" sid="119743910074895" type="txt_right">
                            <param id="0" name="Text">&quot;生命:&quot;&amp;enemy.hp</param>
                        </action>
                        <action id="-3" name="Create object" sid="444330237598687" type="System">
                            <param id="0" name="Object to create">txt_right</param>
                            <param id="1" name="Layer">&quot;ui2&quot;</param>
                            <param id="2" name="X">enemy.X-enemy.Width/2-40</param>
                            <param id="3" name="Y">enemy.Y-enemy.Height/5</param>
                        </action>
                        <action id="-7" name="Set size" sid="325344279181051" type="txt_right">
                            <param id="0" name="Width">100</param>
                            <param id="1" name="Height">32</param>
                        </action>
                        <action id="0" name="Set text" sid="201395005956125" type="txt_right">
                            <param id="0" name="Text">&quot;攻击:&quot;&amp;enemy.atk</param>
                        </action>
                        <action id="-10" name="Set value" sid="386679818539581" type="txt_right">
                            <param id="0" name="Instance variable">groupID</param>
                            <param id="1" name="Value">&quot;enemy&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="391357658407853" type="txt_right">
                            <param id="0" name="Instance variable">actionID</param>
                            <param id="1" name="Value">&quot;atk&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="640822525908914">
                    <conditions>
                        <condition behavior="MoveTo" id="0" name="On hit target position" sid="927915549715808" type="player_poxy" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="191729041194272" type="System">
                            <param id="0" name="Object to create">txt_left</param>
                            <param id="1" name="Layer">&quot;ui2&quot;</param>
                            <param id="2" name="X">player_poxy.X+player_poxy.Width+30</param>
                            <param id="3" name="Y">player_poxy.Y-player_poxy.Height/2</param>
                        </action>
                        <action id="-10" name="Set value" sid="556084799200798" type="txt_left">
                            <param id="0" name="Instance variable">groupID</param>
                            <param id="1" name="Value">&quot;player&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="594109461711673" type="txt_left">
                            <param id="0" name="Instance variable">actionID</param>
                            <param id="1" name="Value">&quot;hp&quot;</param>
                        </action>
                        <action id="-7" name="Set size" sid="225832901668477" type="txt_left">
                            <param id="0" name="Width">100</param>
                            <param id="1" name="Height">32</param>
                        </action>
                        <action id="0" name="Set text" sid="409750302530149" type="txt_left">
                            <param id="0" name="Text">&quot;生命:&quot;&amp;player_poxy.hp</param>
                        </action>
                        <action id="-3" name="Create object" sid="521780455871855" type="System">
                            <param id="0" name="Object to create">txt_left</param>
                            <param id="1" name="Layer">&quot;ui2&quot;</param>
                            <param id="2" name="X">player_poxy.X+player_poxy.Width+30</param>
                            <param id="3" name="Y">player_poxy.Y-player_poxy.Height/3</param>
                        </action>
                        <action id="-10" name="Set value" sid="920100527285280" type="txt_left">
                            <param id="0" name="Instance variable">groupID</param>
                            <param id="1" name="Value">&quot;playr&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="730076667103138" type="txt_left">
                            <param id="0" name="Instance variable">actionID</param>
                            <param id="1" name="Value">&quot;atk&quot;</param>
                        </action>
                        <action id="-7" name="Set size" sid="266912017455601" type="txt_left">
                            <param id="0" name="Width">100</param>
                            <param id="1" name="Height">32</param>
                        </action>
                        <action id="0" name="Set text" sid="405011454280132" type="txt_left">
                            <param id="0" name="Text">&quot;攻击:&quot;&amp;player_poxy.atk</param>
                        </action>
                        <action id="-3" name="Create object" sid="155658700456497" type="System">
                            <param id="0" name="Object to create">btn_attack</param>
                            <param id="1" name="Layer">&quot;ui2&quot;</param>
                            <param id="2" name="X">960</param>
                            <param id="3" name="Y">540</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="196641067960068">
                    <conditions>
                        <condition id="3" name="On touched object" sid="471931815379154" type="Touch">
                            <param id="0" name="Object">btn_attack</param>
                        </condition>
                        <condition id="-10" name="Compare opacity" sid="386432632928950" type="btn_attack">
                            <param id="0" name="Comparison">0</param>
                            <param id="1" name="Opacity">100</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-16" name="Set opacity" sid="978730839460817" type="btn_attack">
                            <param id="0" name="Opacity">40</param>
                        </action>
                        <action id="0" name="Call function" sid="790958592051940" type="Function">
                            <param id="0" name="Name">&quot;attack&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;enemy&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="662106883714081">
                    <conditions>
                        <condition id="0" name="On function" sid="925964011913520" type="Function">
                            <param id="0" name="Name">&quot;attack&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="objX" sid="467958985099330" static="0" type="number">0</variable>
                        <variable constant="0" name="objY" sid="458867322910424" static="0" type="number">0</variable>
                        <variable constant="0" name="atk" sid="566376069177036" static="0" type="number">0</variable>
                        <event-block sid="584028594943501">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="650989309009340" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;enemy&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="921563206659876" type="System">
                                    <param id="0" name="Variable">objX</param>
                                    <param id="1" name="Value">enemy.X</param>
                                </action>
                                <action id="-9" name="Set value" sid="158253852357395" type="System">
                                    <param id="0" name="Variable">objY</param>
                                    <param id="1" name="Value">enemy.Y-enemy.Height/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="191731163742230" type="System">
                                    <param id="0" name="Variable">atk</param>
                                    <param id="1" name="Value">player_poxy.atk</param>
                                </action>
                                <action behavior="Sine" id="0" name="Set active" sid="466377746377561" type="player_poxy">
                                    <param id="0" name="State">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="459634836542997" type="System">
                                    <param id="0" name="Seconds">0.3</param>
                                </action>
                                <action behavior="Sine" id="0" name="Set active" sid="152892444343159" type="player_poxy">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="954231855137167">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="226274845006210" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;player&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="774882978836459" type="System">
                                    <param id="0" name="Variable">objX</param>
                                    <param id="1" name="Value">player_poxy.X</param>
                                </action>
                                <action id="-9" name="Set value" sid="252826705371713" type="System">
                                    <param id="0" name="Variable">objY</param>
                                    <param id="1" name="Value">player_poxy.Y-player_poxy.Height/2</param>
                                </action>
                                <action id="-9" name="Set value" sid="619186708422161" type="System">
                                    <param id="0" name="Variable">atk</param>
                                    <param id="1" name="Value">enemy.atk</param>
                                </action>
                                <action behavior="Sine" id="0" name="Set active" sid="854455397704035" type="enemy">
                                    <param id="0" name="State">1</param>
                                </action>
                                <action id="-16" name="Wait" sid="453968904993479" type="System">
                                    <param id="0" name="Seconds">0.3</param>
                                </action>
                                <action behavior="Sine" id="0" name="Set active" sid="864977345271068" type="enemy">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="995904184642291">
                            <conditions />
                            <actions>
                                <action id="-3" name="Create object" sid="147343009322284" type="System">
                                    <param id="0" name="Object to create">attack</param>
                                    <param id="1" name="Layer">&quot;fx&quot;</param>
                                    <param id="2" name="X">objX</param>
                                    <param id="3" name="Y">objY</param>
                                </action>
                                <action id="-7" name="Set size" sid="302974414270089" type="attack">
                                    <param id="0" name="Width">120</param>
                                    <param id="1" name="Height">200</param>
                                </action>
                                <action id="-8" name="Set angle" sid="626025117594283" type="attack">
                                    <param id="0" name="Angle">45</param>
                                </action>
                                <action behavior="Timer" id="2" name="Start" sid="547904736625180" type="attack">
                                    <param id="0" name="Time">0.2</param>
                                    <param id="1" name="Timer">&quot;_attack&quot;</param>
                                    <param id="2" name="Repeat">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="622203831478143" type="attack">
                                    <param id="0" name="Instance variable">atk</param>
                                    <param id="1" name="Value">atk</param>
                                </action>
                                <action id="-10" name="Set value" sid="837529660671850" type="attack">
                                    <param id="0" name="Instance variable">target</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="694820755513889">
                    <conditions>
                        <condition behavior="Timer" id="0" name="Is timer running" sid="179746487705747" type="attack">
                            <param id="0" name="Timer">&quot;_attack&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-6" name="Set height" sid="114570548773931" type="attack">
                            <param id="0" name="Height">200*Self.Timer.ElapsedPercent(&quot;_attack&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="795392262098908">
                    <conditions>
                        <condition behavior="Timer" id="1" name="On time-out" sid="195944843727968" type="attack">
                            <param id="0" name="Timer">&quot;_attack&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="ScrollTo" id="0" name="Shake" sid="921589350846896" type="camera">
                            <param id="0" name="Magnitude">20</param>
                            <param id="1" name="Duration">0.5</param>
                            <param id="2" name="Mode">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="425844024152623">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="343870520046444" type="attack">
                                    <param id="0" name="Instance variable">target</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;enemy&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Subtract from" sid="472530781667225" type="enemy">
                                    <param id="0" name="Instance variable">hp</param>
                                    <param id="1" name="Value">attack.atk</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="530765414554739">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="250522474020972" type="enemy">
                                            <param id="0" name="Instance variable">hp</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="118204968020953" type="enemy">
                                            <param id="0" name="Instance variable">hp</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action behavior="Fade" id="4" name="Set fade-out time" sid="726359714750192" type="enemy">
                                            <param id="0" name="Fade-out time">2</param>
                                        </action>
                                        <action behavior="Fade" id="1" name="Start fade" sid="820450692719414" type="enemy" />
                                        <action id="0" name="Add key" sid="274322498764890" type="Dictionary">
                                            <param id="0" name="Key">&quot;playerHp&quot;</param>
                                            <param id="1" name="Value">player_poxy.hp</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="914243044909907">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="512555407223189" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Wait" sid="898835125784395" type="System">
                                            <param id="0" name="Seconds">1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="656634060773091" type="Function">
                                            <param id="0" name="Name">&quot;attack&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;player&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="404202606428446">
                            <conditions>
                                <condition id="-22" name="Else" sid="465447312815529" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="510447894564106" type="attack">
                                    <param id="0" name="Instance variable">target</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;player&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Subtract from" sid="888531876807353" type="player_poxy">
                                    <param id="0" name="Instance variable">hp</param>
                                    <param id="1" name="Value">attack.atk</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="976857959339402">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="268675924861349" type="player_poxy">
                                            <param id="0" name="Instance variable">hp</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="920626407344020" type="player_poxy">
                                            <param id="0" name="Instance variable">hp</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="0" name="Call function" sid="578578389750609" type="Function">
                                            <param id="0" name="Name">&quot;bubbleInformation&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;游戏失败，将重新开始&quot;</param>
                                        </action>
                                        <action id="3" name="Clear" sid="241878872752806" type="Dictionary" />
                                        <action id="-16" name="Wait" sid="545478332253588" type="System">
                                            <param id="0" name="Seconds">2</param>
                                        </action>
                                        <action id="-2" name="Go to layout" sid="659182193855784" type="System">
                                            <param id="0" name="Layout">loading</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="114333483657651">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="125557630830030" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Wait" sid="232595788531019" type="System">
                                            <param id="0" name="Seconds">1</param>
                                        </action>
                                        <action id="-16" name="Set opacity" sid="441827252335509" type="btn_attack">
                                            <param id="0" name="Opacity">100</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="433287497880323">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="187912035421454" type="Function">
                                    <param id="0" name="Name">&quot;refreshTxt&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="804527518031153">
                    <conditions>
                        <condition id="0" name="On function" sid="356599809787030" type="Function">
                            <param id="0" name="Name">&quot;refreshTxt&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="225355857172679">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="122405725574133" type="txts">
                                    <param id="0" name="Instance variable">groupID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;enemy&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="951066202615609" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;hp&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="771155796440807" type="txts">
                                    <param id="0" name="Text">&quot;生命:&quot;&amp;enemy.hp</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="707051430434487">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="821189629233407" type="txts">
                                    <param id="0" name="Instance variable">groupID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;player&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="429776732699911" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;hp&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="701087855466912" type="txts">
                                    <param id="0" name="Text">&quot;生命:&quot;&amp;player_poxy.hp</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="299291136404288">
                    <conditions>
                        <condition behavior="Fade" id="0" name="On fade-out finished" sid="288841750670415" type="enemy" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="783959658748702" type="player_poxy">
                            <param id="0" name="X">1296</param>
                            <param id="1" name="Y">531</param>
                        </action>
                        <action id="-16" name="Wait" sid="614128268506030" type="System">
                            <param id="0" name="Seconds">0</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="494583715211040" type="System">
                            <param id="0" name="Layout">game</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
