<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>e_game</name>
    <events>
        <include>e_bubbleImformation</include>
        <include>e_fadeInOut</include>
        <event-group description="" sid="553412261128497" title="startGame">
            <sub-events>
                <event-block sid="147050877014865">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="562927521785783" type="System" />
                    </conditions>
                    <actions>
                        <action id="5" name="Check item exists" sid="108070380248381" type="LocalStorage">
                            <param id="0" name="Key">&quot;aferCombat&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="522619274093198">
                    <conditions>
                        <condition id="10" name="On item missing" sid="819011303600688" type="LocalStorage">
                            <param id="0" name="Key">&quot;aferCombat&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="519582617336626" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;---------重新关卡&quot;</param>
                        </action>
                        <action id="0" name="Call function" sid="930044929719952" type="Function">
                            <param id="0" name="Name">&quot;restartGame&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="168615147781695" type="Function">
                            <param id="0" name="Name">&quot;playerMove&quot;</param>
                            <param id="1" name="Parameter {n}">1</param>
                        </action>
                        <action id="0" name="Call function" sid="104599019295579" type="Function">
                            <param id="0" name="Name">&quot;fadeInLayout&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="543350142634673">
                    <conditions>
                        <condition id="9" name="On item exists" sid="580156281870759" type="LocalStorage">
                            <param id="0" name="Key">&quot;aferCombat&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="120258385541305" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;---------继续关卡&quot;</param>
                        </action>
                        <action id="-37" name="Load" sid="465655554013897" type="System">
                            <param id="0" name="Slot">&quot;beforeCombat&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="953252050131819">
                    <conditions>
                        <condition id="-29" name="On load complete" sid="887376906009017" type="System" />
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="475213340982012" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;---------加载成功&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="260021244416359" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Value">float(LocalStorage.ItemValue)</param>
                        </action>
                        <action id="3" name="Clear storage" sid="665767064640008" type="LocalStorage" />
                        <action id="0" name="Call function" sid="362662875082996" type="Function">
                            <param id="0" name="Name">&quot;fadeInLayout&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="400992287861651">
                    <conditions>
                        <condition id="-30" name="On load failed" sid="353843065158254" type="System" />
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="389279600422834" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;---------加载失败&quot;</param>
                        </action>
                        <action id="-26" name="Restart layout" sid="141507774025163" type="System" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="991099189678799" title="restart">
            <sub-events>
                <event-block sid="553335279090456">
                    <conditions>
                        <condition id="0" name="On function" sid="388836966527081" type="Function">
                            <param id="0" name="Name">&quot;gameOver&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="457707701218032" type="Function">
                            <param id="0" name="Name">&quot;bubbleInformation&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;游戏失败，将重新开始&quot;</param>
                        </action>
                        <action id="-16" name="Wait" sid="961910084413409" type="System">
                            <param id="0" name="Seconds">2</param>
                        </action>
                        <action id="-26" name="Restart layout" sid="818750300855670" type="System" />
                    </actions>
                </event-block>
                <event-block sid="541653301534345">
                    <conditions>
                        <condition id="0" name="On function" sid="711168324470483" type="Function">
                            <param id="0" name="Name">&quot;restartGame&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="501431035549846" type="Function">
                            <param id="0" name="Name">&quot;resetPlayer&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="773354073309025" type="Function">
                            <param id="0" name="Name">&quot;resetArray&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="997171153976608" title="ui">
            <sub-events>
                <event-block sid="166552554072793">
                    <conditions>
                        <condition id="0" name="On function" sid="131701217630232" type="Function">
                            <param id="0" name="Name">&quot;displayPlayerUI&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="162470397434768">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="277050831261041" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;hp&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="848214939218142" type="txts">
                                    <param id="0" name="Text">&quot;生命:&quot;&amp;player_poxy.hp</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="772096830272074">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="453494617282917" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;energy&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="242487290139901" type="txts">
                                    <param id="0" name="Text">&quot;体力:&quot;&amp;player_poxy.energy</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="759046677210425">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="290197506921888" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;hungry&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="668532934650383" type="txts">
                                    <param id="0" name="Text">&quot;饥饿:&quot;&amp;player_poxy.hungry</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="536663957936770">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="494975927009262" type="txts">
                                    <param id="0" name="Instance variable">actionID</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;distance&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="647184079555248" type="txts">
                                    <param id="0" name="Text">&quot;距离:&quot;&amp;player_poxy.moveDistance&amp;&quot;米&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="201019932626415" title="bg">
            <sub-events>
                <event-block sid="685501037914123">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="322432018769349" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="actionFSM" id="7" name="Compare current state" sid="560548372797937" type="player_poxy">
                            <param id="0" name="Name">&quot;move&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="533721378756048">
                            <conditions>
                                <condition behavior="Timer" id="0" inverted="1" name="Is timer running" sid="704672140250233" type="player_poxy">
                                    <param id="0" name="Timer">&quot;distance&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Timer" id="2" name="Start" sid="860293612321778" type="player_poxy">
                                    <param id="0" name="Time">60*dt</param>
                                    <param id="1" name="Timer">&quot;distance&quot;</param>
                                    <param id="2" name="Repeat">1</param>
                                </action>
                                <action id="-11" name="Add to" sid="485948747059554" type="player_poxy">
                                    <param id="0" name="Instance variable">moveDistance</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="371126363486503">
                            <conditions>
                                <condition id="-11" name="For Each" sid="328596642252529" type="System">
                                    <param id="0" name="Object">bg_1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="278349996396260" type="bg_1">
                                    <param id="0" name="X">Self.X-60*dt </param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="193675963963449">
                                    <conditions>
                                        <condition id="-1" name="Compare X" sid="995985812361873" type="bg_1">
                                            <param id="0" name="Comparison">3</param>
                                            <param id="1" name="X co-ordinate">-Self.Width</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-1" name="Set X" sid="851866427931559" type="bg_1">
                                            <param id="0" name="X">1134</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="930036176914099" title="pause">
            <sub-events>
                <event-block sid="470508083561893">
                    <conditions>
                        <condition id="3" name="On touched object" sid="502828752469191" type="Touch">
                            <param id="0" name="Object">btn_pause</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="216975646761051" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="643376936815785">
                            <conditions>
                                <condition behavior="actionFSM" id="7" name="Compare current state" sid="918745299102447" type="player_poxy">
                                    <param id="0" name="Name">&quot;move&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="798735269371241" type="Function">
                                    <param id="0" name="Name">&quot;playerMove&quot;</param>
                                    <param id="1" name="Parameter {n}">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="785423419376527">
                            <conditions>
                                <condition id="-22" name="Else" sid="261051543616371" type="System" />
                                <condition behavior="actionFSM" id="7" name="Compare current state" sid="903516872410773" type="player_poxy">
                                    <param id="0" name="Name">&quot;pause&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="856400568331397" type="Function">
                                    <param id="0" name="Name">&quot;playerMove&quot;</param>
                                    <param id="1" name="Parameter {n}">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="866009845253796" title="player">
            <sub-events>
                <event-block sid="965279376794203">
                    <conditions>
                        <condition id="0" name="On function" sid="548126792135748" type="Function">
                            <param id="0" name="Name">&quot;resetPlayer&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Pin" id="0" name="Pin to object" sid="673041741934474" type="player_skin">
                            <param id="0" name="Pin to">player_poxy</param>
                            <param id="1" name="Mode">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="948652252379567" type="player_poxy">
                            <param id="0" name="Instance variable">moveDistance</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="876861950198660" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Value">Self.maxHp</param>
                        </action>
                        <action id="-10" name="Set value" sid="587715090930185" type="player_poxy">
                            <param id="0" name="Instance variable">energy</param>
                            <param id="1" name="Value">Self.maxEnergy</param>
                        </action>
                        <action id="-10" name="Set value" sid="524552771555080" type="player_poxy">
                            <param id="0" name="Instance variable">atk</param>
                            <param id="1" name="Value">Self.MaxAtk</param>
                        </action>
                        <action id="-10" name="Set value" sid="180320905953542" type="player_poxy">
                            <param id="0" name="Instance variable">hungry</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="884286011067479" type="player_poxy">
                            <param id="0" name="Instance variable">getItem</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="243752639329425" type="player_poxy">
                            <param id="0" name="Instance variable">getEnemy</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>(0 暂停移动&#x0D;&#x0A;1  继续移动)</comment>
                <event-block sid="771467588386285">
                    <conditions>
                        <condition id="0" name="On function" sid="215090158899003" type="Function">
                            <param id="0" name="Name">&quot;playerMove&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="591038388022138">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="293213472656785" type="System">
                                    <param id="0" name="First value">Function.Param(0)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Timer" id="3" name="Pause" sid="778438159561597" type="player_poxy">
                                    <param id="0" name="Timer">&quot;getItem&quot;</param>
                                </action>
                                <action behavior="Timer" id="3" name="Pause" sid="239463265835882" type="player_poxy">
                                    <param id="0" name="Timer">&quot;getEnemy&quot;</param>
                                </action>
                                <action behavior="actionFSM" id="11" name="Go to state" sid="507207519629118" type="player_poxy">
                                    <param id="0" name="Name">&quot;pause&quot;</param>
                                </action>
                                <action behavior="animationFSM" id="11" name="Go to state" sid="239101873732093" type="player_poxy">
                                    <param id="0" name="Name">&quot;idle&quot;</param>
                                </action>
                                <action id="4" name="Set animation" sid="175038148924013" type="btn_pause">
                                    <param id="0" name="Animation">&quot;play&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="692547905882514">
                            <conditions>
                                <condition id="-22" name="Else" sid="381375171499047" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="Timer" id="4" name="Resume" sid="265097086736721" type="player_poxy">
                                    <param id="0" name="Timer">&quot;getItem&quot;</param>
                                </action>
                                <action behavior="Timer" id="4" name="Resume" sid="754035197824270" type="player_poxy">
                                    <param id="0" name="Timer">&quot;getEnemy&quot;</param>
                                </action>
                                <action behavior="actionFSM" id="11" name="Go to state" sid="530069673560332" type="player_poxy">
                                    <param id="0" name="Name">&quot;move&quot;</param>
                                </action>
                                <action behavior="animationFSM" id="11" name="Go to state" sid="991235993956170" type="player_poxy">
                                    <param id="0" name="Name">&quot;move&quot;</param>
                                </action>
                                <action id="4" name="Set animation" sid="447364479047544" type="btn_pause">
                                    <param id="0" name="Animation">&quot;pause&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>角色上相关数值设置</comment>
                <event-block sid="778116613903751">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="255138566592908" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="Timer" id="0" inverted="1" name="Is timer running" sid="203126700499135" type="player_poxy">
                            <param id="0" name="Timer">&quot;movingTimer&quot;</param>
                        </condition>
                        <condition behavior="actionFSM" id="7" inverted="1" name="Compare current state" sid="717193957686691" type="player_poxy">
                            <param id="0" name="Name">&quot;combat&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Timer" id="2" name="Start" sid="830864672310714" type="player_poxy">
                            <param id="0" name="Time">1</param>
                            <param id="1" name="Timer">&quot;movingTimer&quot;</param>
                            <param id="2" name="Repeat">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="237201912381545">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="146194830690466" type="player_poxy">
                                    <param id="0" name="Instance variable">hungry</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Value">Self.maxHungry</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-11" name="Add to" sid="152228692499685" type="player_poxy">
                                    <param id="0" name="Instance variable">hungry</param>
                                    <param id="1" name="Value">0.5</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="564707109658846">
                            <conditions>
                                <condition id="-22" name="Else" sid="245983824870915" type="System" />
                                <condition id="-7" name="Compare instance variable" sid="750384081449276" type="player_poxy">
                                    <param id="0" name="Instance variable">hungry</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Value">Self.maxHungry</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Subtract from" sid="120257077349128" type="player_poxy">
                                    <param id="0" name="Instance variable">hp</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="249099335404425">
                            <conditions>
                                <condition behavior="actionFSM" id="7" name="Compare current state" sid="696328380623685" type="player_poxy">
                                    <param id="0" name="Name">&quot;move&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="759520917785178">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="999108066157020" type="player_poxy">
                                            <param id="0" name="Instance variable">energy</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-12" name="Subtract from" sid="185917243308753" type="player_poxy">
                                            <param id="0" name="Instance variable">energy</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="833565716233616">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="772691379106244" type="player_poxy">
                                                    <param id="0" name="Instance variable">energy</param>
                                                    <param id="1" name="Comparison">3</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Call function" sid="636178376846224" type="Function">
                                                    <param id="0" name="Name">&quot;playerMove&quot;</param>
                                                    <param id="1" name="Parameter {n}">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="924789334753319">
                            <conditions>
                                <condition behavior="actionFSM" id="7" name="Compare current state" sid="355964673362565" type="player_poxy">
                                    <param id="0" name="Name">&quot;pause&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="760717184987727">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="776460990239905" type="player_poxy">
                                            <param id="0" name="Instance variable">energy</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Value">Self.maxEnergy</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-11" name="Add to" sid="212314032936897" type="player_poxy">
                                            <param id="0" name="Instance variable">energy</param>
                                            <param id="1" name="Value">2</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="943745210766100">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="710308927724773" type="player_poxy">
                                                    <param id="0" name="Instance variable">energy</param>
                                                    <param id="1" name="Comparison">5</param>
                                                    <param id="2" name="Value">Self.maxEnergy</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="814841231923871" type="player_poxy">
                                                    <param id="0" name="Instance variable">energy</param>
                                                    <param id="1" name="Value">Self.maxEnergy</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="366342276778510">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="751230472144798" type="Function">
                                    <param id="0" name="Name">&quot;displayPlayerUI&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="336931147632873">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="677700255111506" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="609249872626053" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="699589403649580" type="Function">
                            <param id="0" name="Name">&quot;gameOver&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="253177111017616">
                    <conditions>
                        <condition behavior="animationFSM" id="0" name="On enter state" sid="213292249860959" type="player_poxy">
                            <param id="0" name="Name">&quot;move&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="138584823435849" type="player_skin">
                            <param id="0" name="Animation">&quot;move&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="953288925677101">
                    <conditions>
                        <condition behavior="animationFSM" id="0" name="On enter state" sid="761126682557555" type="player_poxy">
                            <param id="0" name="Name">&quot;search&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="318457919256685" type="player_skin">
                            <param id="0" name="Animation">&quot;search&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="442318569023809">
                    <conditions>
                        <condition behavior="animationFSM" id="0" name="On enter state" sid="426124084475598" type="player_poxy">
                            <param id="0" name="Name">&quot;idle&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="913114145239520" type="player_skin">
                            <param id="0" name="Animation">&quot;idle&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="828169281532222" title="items">
            <sub-events>
                <event-block sid="702431015071049">
                    <conditions>
                        <condition id="3" name="On touched object" sid="745759963021714" type="Touch">
                            <param id="0" name="Object">item</param>
                        </condition>
                        <condition id="4" inverted="1" name="Is touching object" sid="922247635323748" type="Touch">
                            <param id="0" name="Object">btn_pause</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="361907751114613" type="Function">
                            <param id="0" name="Name">&quot;playerMove&quot;</param>
                            <param id="1" name="Parameter {n}">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="423485905297415">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="575753739921048" type="System">
                                    <param id="0" name="First value">distance(player_poxy.X,player_poxy.Y,item.X,item.Y)</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">300</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="animationFSM" id="11" name="Go to state" sid="597240105986003" type="player_poxy">
                                    <param id="0" name="Name">&quot;search&quot;</param>
                                </action>
                                <action id="-3" name="Create object" sid="502694431442154" type="System">
                                    <param id="0" name="Object to create">item_progressBg</param>
                                    <param id="1" name="Layer">item.LayerName</param>
                                    <param id="2" name="X">item.X-item.Width/2</param>
                                    <param id="3" name="Y">item.Y-item.Height/1.8</param>
                                </action>
                                <action id="-7" name="Set size" sid="409652545679276" type="item_progressBg">
                                    <param id="0" name="Width">192</param>
                                    <param id="1" name="Height">32</param>
                                </action>
                                <action id="-10" name="Set value" sid="993530137242196" type="item_progressBg">
                                    <param id="0" name="Instance variable">Puid</param>
                                    <param id="1" name="Value">item.UID</param>
                                </action>
                                <action id="-3" name="Create object" sid="747532856637336" type="System">
                                    <param id="0" name="Object to create">item_progress</param>
                                    <param id="1" name="Layer">item.LayerName</param>
                                    <param id="2" name="X">item_progressBg.X</param>
                                    <param id="3" name="Y">item_progressBg.Y</param>
                                </action>
                                <action id="-7" name="Set size" sid="395756806628392" type="item_progress">
                                    <param id="0" name="Width">item_progressBg.Width</param>
                                    <param id="1" name="Height">item_progressBg.Height</param>
                                </action>
                                <action behavior="Timer" id="2" name="Start" sid="510790260753939" type="item_progress">
                                    <param id="0" name="Time">2</param>
                                    <param id="1" name="Timer">&quot;_search&quot;</param>
                                    <param id="2" name="Repeat">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="812356747586140" type="item_progress">
                                    <param id="0" name="Instance variable">Puid</param>
                                    <param id="1" name="Value">item.UID</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="282408008533065">
                            <conditions>
                                <condition id="-22" name="Else" sid="166605646156120" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="671139949565997" type="Function">
                                    <param id="0" name="Name">&quot;bubbleInformation&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;我需要再靠近一些&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="643323966426988">
                    <conditions>
                        <condition id="-11" name="For Each" sid="965361187667005" type="System">
                            <param id="0" name="Object">item_progress</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="148503343554043">
                            <conditions>
                                <condition behavior="Timer" id="0" name="Is timer running" sid="615126271606557" type="item_progress">
                                    <param id="0" name="Timer">&quot;_search&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-5" name="Set width" sid="559232367482699" type="item_progress">
                                    <param id="0" name="Width">192*Self.Timer.ElapsedPercent(&quot;_search&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="205550839058595">
                    <conditions>
                        <condition behavior="Timer" id="1" name="On time-out" sid="489420826373977" type="item_progress">
                            <param id="0" name="Timer">&quot;_search&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="667145515496186" type="item_progress" />
                        <action id="0" name="Call function" sid="909135676166994" type="Function">
                            <param id="0" name="Name">&quot;bubbleInformation&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;获得物资XXX&quot;</param>
                        </action>
                        <action id="-12" name="Subtract from" sid="556384479616986" type="player_poxy">
                            <param id="0" name="Instance variable">hungry</param>
                            <param id="1" name="Value">3</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="545551055699564">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="557319835276603" type="item_progressBg">
                                    <param id="0" name="Instance variable">Puid</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">item_progress.Puid</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="718798403334703" type="item_progressBg" />
                            </actions>
                        </event-block>
                        <event-block sid="502096189808208">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="865121107316906" type="item">
                                    <param id="0" name="Unique ID">item_progress.Puid</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="animationFSM" id="11" name="Go to state" sid="820305579047143" type="player_poxy">
                                    <param id="0" name="Name">&quot;idle&quot;</param>
                                </action>
                                <action id="5" name="Set frame" sid="154730213759461" type="item">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                                <action behavior="Fade" id="0" name="Restart fade" sid="979196013198350" type="item" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="113605935947698">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="122105833157247" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="167538691668216" type="player_poxy">
                            <param id="0" name="Instance variable">getItem</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="212292999013885" type="player_poxy">
                            <param id="0" name="Instance variable">getItem</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action behavior="Timer" id="2" name="Start" sid="778465336597545" type="player_poxy">
                            <param id="0" name="Time">int(random(3,8))</param>
                            <param id="1" name="Timer">&quot;getItem&quot;</param>
                            <param id="2" name="Repeat">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="134402125834962">
                    <conditions>
                        <condition behavior="Timer" id="1" name="On time-out" sid="236599352654811" type="player_poxy">
                            <param id="0" name="Timer">&quot;getItem&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="533454811417940" type="player_poxy">
                            <param id="0" name="Instance variable">getItem</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-3" name="Create object" sid="327012752372787" type="System">
                            <param id="0" name="Object to create">item</param>
                            <param id="1" name="Layer">&quot;game&quot;</param>
                            <param id="2" name="X">1300</param>
                            <param id="3" name="Y">random(420,600)</param>
                        </action>
                        <action id="0" name="Sort all Objects in layer by Y" sid="824499155509265" type="ZSorter">
                            <param id="0" name="Layer">&quot;game&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="232924656955798">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="389748494653536" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="actionFSM" id="7" name="Compare current state" sid="949487008321721" type="player_poxy">
                            <param id="0" name="Name">&quot;move&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="508755093592370">
                            <conditions>
                                <condition id="-11" name="For Each" sid="531408137324893" type="System">
                                    <param id="0" name="Object">item</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="698507866076654" type="item">
                                    <param id="0" name="X">Self.X-60*dt</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="529092404829717" title="array_item">
            <sub-events>
                <event-block sid="448889271785801">
                    <conditions>
                        <condition id="0" name="On function" sid="505957056812026" type="Function">
                            <param id="0" name="Name">&quot;resetArray&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Clear" sid="975280156688654" type="Array_item" />
                        <action id="3" name="Set at XY" sid="960033815446454" type="Array_item">
                            <param id="0" name="X">0</param>
                            <param id="1" name="Y">0</param>
                            <param id="2" name="Value">&quot;knife&quot;</param>
                        </action>
                        <action id="3" name="Set at XY" sid="981018993731900" type="Array_item">
                            <param id="0" name="X">0</param>
                            <param id="1" name="Y">1</param>
                            <param id="2" name="Value">1</param>
                        </action>
                        <action id="3" name="Set at XY" sid="957526743501401" type="Array_item">
                            <param id="0" name="X">1</param>
                            <param id="1" name="Y">0</param>
                            <param id="2" name="Value">&quot;kettle&quot;</param>
                        </action>
                        <action id="3" name="Set at XY" sid="165477789975214" type="Array_item">
                            <param id="0" name="X">1</param>
                            <param id="1" name="Y">1</param>
                            <param id="2" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="230229336000061" title="enemy">
            <sub-events>
                <event-block sid="266018639757432">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="344193036219462" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="950021477764580" type="player_poxy">
                            <param id="0" name="Instance variable">getEnemy</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="873306671204019" type="player_poxy">
                            <param id="0" name="Instance variable">getEnemy</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action behavior="Timer" id="2" name="Start" sid="374230324941309" type="player_poxy">
                            <param id="0" name="Time">int(random(8,15))</param>
                            <param id="1" name="Timer">&quot;getEnemy&quot;</param>
                            <param id="2" name="Repeat">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="394976641308997">
                    <conditions>
                        <condition behavior="Timer" id="1" name="On time-out" sid="817593148181625" type="player_poxy">
                            <param id="0" name="Timer">&quot;getEnemy&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="962416467552644" type="player_poxy">
                            <param id="0" name="Instance variable">getEnemy</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-3" name="Create object" sid="691272744033101" type="System">
                            <param id="0" name="Object to create">enemy</param>
                            <param id="1" name="Layer">&quot;bg_2&quot;</param>
                            <param id="2" name="X">1300</param>
                            <param id="3" name="Y">280</param>
                        </action>
                        <action behavior="FSM" id="11" name="Go to state" sid="751094805425462" type="enemy">
                            <param id="0" name="Name">&quot;idle&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="311805158309637">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="455859021449078" type="player_poxy">
                            <param id="0" name="Instance variable">hp</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition behavior="actionFSM" id="7" name="Compare current state" sid="520113227831705" type="player_poxy">
                            <param id="0" name="Name">&quot;move&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="143617145446704">
                            <conditions>
                                <condition id="-11" name="For Each" sid="300786570183863" type="System">
                                    <param id="0" name="Object">enemy</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-1" name="Set X" sid="547851034755485" type="enemy">
                                    <param id="0" name="X">Self.X-60*dt</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="336667580685557">
                                    <conditions>
                                        <condition behavior="FSM" id="7" name="Compare current state" sid="958482282745264" type="enemy">
                                            <param id="0" name="Name">&quot;idle&quot;</param>
                                        </condition>
                                        <condition id="-8" name="Compare two values" sid="211116869145287" type="System">
                                            <param id="0" name="First value">distance(enemy.X,enemy.Y,player_poxy.X,player_poxy.Y)</param>
                                            <param id="1" name="Comparison">3</param>
                                            <param id="2" name="Second value">400</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="959444387093747" type="Function">
                                            <param id="0" name="Name">&quot;playerMove&quot;</param>
                                            <param id="1" name="Parameter {n}">0</param>
                                        </action>
                                        <action id="0" name="Call function" sid="226830126313021" type="Function">
                                            <param id="0" name="Name">&quot;bubbleInformation&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;小心！！！&quot;</param>
                                        </action>
                                        <action behavior="FSM" id="11" name="Go to state" sid="955757048427578" type="enemy">
                                            <param id="0" name="Name">&quot;appear&quot;</param>
                                        </action>
                                        <action behavior="MoveTo" id="4" name="Move to XY" sid="980104205557413" type="enemy">
                                            <param id="0" name="X">Self.X</param>
                                            <param id="1" name="Y">Self.Y-500</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="767357362808448">
                                    <conditions>
                                        <condition id="-1" name="Compare X" sid="994188909239154" type="enemy">
                                            <param id="0" name="Comparison">3</param>
                                            <param id="1" name="X co-ordinate">-800</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="108055042858300" type="enemy" />
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="882510827404602">
                    <conditions>
                        <condition behavior="MoveTo" id="0" name="On hit target position" sid="572352291410122" type="enemy" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="790317781003821">
                            <conditions>
                                <condition behavior="FSM" id="7" name="Compare current state" sid="871766649592010" type="enemy">
                                    <param id="0" name="Name">&quot;appear&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="FSM" id="11" name="Go to state" sid="371661489509909" type="enemy">
                                    <param id="0" name="Name">&quot;land&quot;</param>
                                </action>
                                <action id="-26" name="Move to layer" sid="671606311025510" type="enemy">
                                    <param id="0" name="Layer">&quot;game&quot;</param>
                                </action>
                                <action behavior="MoveTo" id="4" name="Move to XY" sid="600720886835826" type="enemy">
                                    <param id="0" name="X">Self.X</param>
                                    <param id="1" name="Y">Self.Y+600</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="526439260382820">
                            <conditions>
                                <condition id="-22" name="Else" sid="881628242930415" type="System" />
                                <condition behavior="FSM" id="7" name="Compare current state" sid="392198281234998" type="enemy">
                                    <param id="0" name="Name">&quot;land&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="FSM" id="11" name="Go to state" sid="326842087367026" type="enemy">
                                    <param id="0" name="Name">&quot;attack&quot;</param>
                                </action>
                                <action id="0" name="Call function" sid="190771790001431" type="Function">
                                    <param id="0" name="Name">&quot;inCombat&quot;</param>
                                    <param id="1" name="Parameter {n}">enemy.UID</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="241968830640250">
                    <conditions>
                        <condition id="0" name="On function" sid="267013654151806" type="Function">
                            <param id="0" name="Name">&quot;inCombat&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="191188028247913" type="System">
                            <param id="0" name="Object to create">blackBg</param>
                            <param id="1" name="Layer">&quot;topUI&quot;</param>
                            <param id="2" name="X">0</param>
                            <param id="3" name="Y">0</param>
                        </action>
                        <action id="-7" name="Set size" sid="490240839061521" type="blackBg">
                            <param id="0" name="Width">1136</param>
                            <param id="1" name="Height">640</param>
                        </action>
                        <action behavior="Flash" id="0" name="Flash" sid="107688104430692" type="blackBg">
                            <param id="0" name="&apos;On&apos; time">0.15</param>
                            <param id="1" name="&apos;Off&apos; time">0.15</param>
                            <param id="2" name="Duration">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="498299924886004" type="blackBg">
                            <param id="0" name="Instance variable">Puid</param>
                            <param id="1" name="Value">Function.Param(0)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="606357790174844">
                    <conditions>
                        <condition behavior="Flash" id="1" name="On flash ended" sid="690680220784397" type="blackBg" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="419691930515414">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="967830415418274" type="enemy">
                                    <param id="0" name="Unique ID">blackBg.Puid</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="987689730626112" type="enemy" />
                            </actions>
                        </event-block>
                        <event-block sid="883700691675577">
                            <conditions />
                            <actions>
                                <action id="-36" name="Save" sid="891759523490461" type="System">
                                    <param id="0" name="Slot">&quot;beforeCombat&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="675423884130752">
                    <conditions>
                        <condition id="-28" name="On save complete" sid="106953898791235" type="System" />
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="550044123324104" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;------保存进度成功&quot;</param>
                        </action>
                        <action id="-9" name="Destroy" sid="725322339411717" type="blackBg" />
                        <action id="-2" name="Go to layout" sid="800333462270274" type="System">
                            <param id="0" name="Layout">combat</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
